---
title: "Bunã§Next.jså‹•ã‹ã—ã¦ã¿ãŸï¼"
emoji: "ğŸ¥Ÿ"
type: "tech"
topics:
  - "docker"
  - "nextjs"
  - "typescript"
  - "bun"
published: true
published_at: "2023-10-07 20:56"
---

## Bunã¨ã¯
Nodeã¨ã®äº’æ›æ€§ã®é«˜ã„JavaScriptã¨TypeScriptã®å‹•ä½œç’°å¢ƒã€‚
npm,yarn,pnpmã¨åŒç­‰æ©Ÿèƒ½ã‚‚ã‚ã£ã¦ã€Webpackã‚„Viteã¿ãŸã„ãªæ©Ÿèƒ½ã‚‚ã‚ã‚‹ã‚‰ã—ã„ã€‚
ã©ã†ã‚„ã‚‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒã„ã„ã‚‰ã—ã„ã€‚

è©³ç´°ã¯è¨˜äº‹ãŒä»¥ä¸‹ã®è¨˜äº‹ãŒè©³ã—ã„ã§ã™ã€‚
https://zenn.dev/dojineko/articles/bun-1-coming-soon

### ç’°å¢ƒ
bun 1.0.4
node 18.18.0

### å°å…¥
https://bun.sh/

Windowsã¯éå¯¾å¿œã ã£ãŸã®ã§WSLã®Ubuntuã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€‚
RoadMapå†…ã«Windows Supportã®é …ç›®ã‚‚ã‚ã£ãŸã®ã§ãã®ã†ã¡å¯¾å¿œã™ã‚‹ã¿ãŸã„ã€‚

```bash
$ curl -fsSL https://bun.sh/install | bash
bun was installed successfully to ~/.bun/bin/bun
```

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¾Œã«ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã¨è¨€ã‚ã‚ŒãŸã®ã§ãã®ã¾ã¾å®Ÿè¡Œã€‚
```bash
$ source /home/<username>/.bashrc
```


bunã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã§ç¢ºèªã€‚
```bash
$ bun -v
1.0.4
```
## è§¦ã£ã¦ã¿ãŸ
### Hello Worldã—ã¦ã¿ã‚‹
TypeScriptãŒãã®ã¾ã¾å‹•ãã‚‰ã—ã„ã®ã§è©¦ã—ã¦ã¿ã‚‹ã€‚

index.tsxã‚’ä½œæˆã€‚
```ts:index.tsx
const server = Bun.serve({
  port: 3000,
  fetch(request) {
    return new Response("Welcome to Bun!");
  },
});

console.log(`Listening on localhost:${server.port}`);
```

å®Ÿè¡Œã€‚
```bash
$ bun index.tsx
```
![å‹•ä½œçµæœç”»é¢ã€‚localhost:3000](https://storage.googleapis.com/zenn-user-upload/33fb9e358164-20231007.png)

localhost3000ã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã‚‹ã€‚ç°¡å˜ã€‚


### Next.jsã®ç’°å¢ƒã‚’ä½œã£ã¦ã¿ã‚‹
https://bun.sh/guides/ecosystem/nextjs

é€Ÿã„ã¨å™‚ãªã®ã§è©¦ã—ã¦ã¿ã‚‹ã€‚

ã„ã¤ã‚‚ã®create next-appã€‚
Bunã¯npmã®æ©Ÿèƒ½ã‚‚å…¼ã­ã¦ã„ã‚‹ã®ã§ãã®ã¾ã¾å‹•ãã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨åˆæœŸåŒ–ã¯Bunãªã®ã§ãã“ã§yarnã¨æ¯”è¼ƒã—ã¦ã¿ã‚‹ã€‚
(dev serverã®å®Ÿè¡Œã«ã¯ã¾ã Node.jsã‚’ä½¿ã£ã¦ã„ã‚‹ã‚‰ã—ã„)

```bash
$ bun create next-app 
Creating a new Next.js app in /home/taltal/wsl-dev/bun-next-example.

Using bun.

Initializing project with template: default

bun install v1.0.4 (745b6b94)

277 packages installed [8.88s]
```
**çµæœ8.88sï¼é€Ÿã„ã€‚**

åŒã˜ç’°å¢ƒã§è©¦ã—ãŸyarnã ã¨21.5sã ã£ãŸã®ã§ä½“æ„Ÿã§ãã‚‹ã»ã©é€Ÿã„ã€‚

### Next.jsã®å®Ÿè¡Œ
AppRouterã®éƒ½åˆä¸Šã€å®Ÿè¡Œã«ã¯Node.jsã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚‰ã—ã„ã®ã§ã€`run dev`ãŒ2ç¨®é¡ã‚ã‚‹ã€‚
Node.js APIã®æ©Ÿèƒ½ã‚’Bunå´ã§"ã¾ã "å®Ÿè£…ã—ã¦ã„ãªã„ã‹ã‚‰ã¨ã®ã“ã¨ã€‚
ãã®ã†ã¡Bunã§çµ±ä¸€ã•ã‚Œã¦ã‚³ãƒãƒ³ãƒ‰ãŒãã‚Œã„ã«ãªã‚‹ã‚“ã ã‚ã†ã‹ãƒ»ãƒ»ï¼Ÿ

```bun --bun run dev```
bunã®ç’°å¢ƒã§å®Ÿè¡Œã§ãã‚‹ã€‚

```bun run dev```
Nodeã®ç’°å¢ƒã§å®Ÿè¡Œã§ãã‚‹ã€‚
= package.jsonã®ã‚³ãƒãƒ³ãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã«éããªã„ã®ã§ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã¯Nodeã«ãªã‚‹ã‚‰ã—ã„ã€‚

### Dockerã§ä½¿ã£ã¦ã¿ã‚‹
è©¦ã—ã«å‹•ä½œç¢ºèªã ã‘ã—ã¦ã¿ã‚‹ã€‚
å¿…è¦æœ€ä½é™ãªDockerfileã‚’ä½œæˆã€‚
https://hub.docker.com/r/oven/bun
ä¸Šè¨˜ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã€‚

```Dockerfile:Dockerfile
FROM oven/bun:latest AS base

WORKDIR /app

COPY package.json .

COPY bun.lockb .

RUN bun install

COPY . .

EXPOSE 3000

CMD ["bun", "--bun", "run", "dev"]
```

ä»¥ä¸‹ã§å®Ÿè¡Œã€‚ã‚¿ã‚°åã¯ä»»æ„ã§ã€‚
```bash
$ docker build . -t bun-docker-example
$ docker run -p 3000:3000 -it bun-docker-example 
```

localhost:3000ã§å‹•ã„ã¦ã„ã‚‹ã‹ç¢ºèªã€‚

### ã‚ã¨ãŒã
ãƒŸã‚¹ãªã©ã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆã§æŒ‡æ‘˜ã„ãŸã ã‘ã‚‹ã¨åŠ©ã‹ã‚Šã¾ã™ãƒ»ãƒ»ï¼